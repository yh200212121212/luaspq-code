; Listing generated by Microsoft (R) Optimizing Compiler Version 18.00.21005.1 

include listing.inc

INCLUDELIB MSVCRT
INCLUDELIB OLDNAMES

PUBLIC	luaZ_init
PUBLIC	luaZ_read
PUBLIC	luaZ_fill
EXTRN	memcpy:PROC
;	COMDAT pdata
pdata	SEGMENT
$pdata$luaZ_read DD imagerel $LN21
	DD	imagerel $LN21+181
	DD	imagerel $unwind$luaZ_read
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$luaZ_fill DD imagerel $LN6
	DD	imagerel $LN6+78
	DD	imagerel $unwind$luaZ_fill
pdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$luaZ_fill DD 020601H
	DD	030023206H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$luaZ_read DD 081401H
	DD	096414H
	DD	075414H
	DD	063414H
	DD	070103214H
xdata	ENDS
; Function compile flags: /Ogtpy
;	COMDAT luaZ_fill
_TEXT	SEGMENT
size$ = 48
z$ = 48
luaZ_fill PROC						; COMDAT
; File f:\0\luaspq-1.1\luaspq-1.1\src\lzio.c
; Line 23
$LN6:
  00000	40 53		 push	 rbx
  00002	48 83 ec 20	 sub	 rsp, 32			; 00000020H
; Line 28
  00006	48 8b 51 18	 mov	 rdx, QWORD PTR [rcx+24]
  0000a	48 8b d9	 mov	 rbx, rcx
  0000d	48 8b 49 20	 mov	 rcx, QWORD PTR [rcx+32]
  00011	4c 8d 44 24 30	 lea	 r8, QWORD PTR size$[rsp]
  00016	ff 53 10	 call	 QWORD PTR [rbx+16]
; Line 30
  00019	48 85 c0	 test	 rax, rax
  0001c	74 27		 je	 SHORT $LN1@luaZ_fill
  0001e	48 8b 4c 24 30	 mov	 rcx, QWORD PTR size$[rsp]
  00023	48 85 c9	 test	 rcx, rcx
  00026	74 1d		 je	 SHORT $LN1@luaZ_fill
; Line 33
  00028	48 89 43 08	 mov	 QWORD PTR [rbx+8], rax
  0002c	48 ff c9	 dec	 rcx
; Line 34
  0002f	48 ff c0	 inc	 rax
  00032	48 89 0b	 mov	 QWORD PTR [rbx], rcx
  00035	0f b6 48 ff	 movzx	 ecx, BYTE PTR [rax-1]
  00039	48 89 43 08	 mov	 QWORD PTR [rbx+8], rax
  0003d	8b c1		 mov	 eax, ecx
; Line 35
  0003f	48 83 c4 20	 add	 rsp, 32			; 00000020H
  00043	5b		 pop	 rbx
  00044	c3		 ret	 0
$LN1@luaZ_fill:
; Line 31
  00045	83 c8 ff	 or	 eax, -1
; Line 35
  00048	48 83 c4 20	 add	 rsp, 32			; 00000020H
  0004c	5b		 pop	 rbx
  0004d	c3		 ret	 0
luaZ_fill ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT luaZ_read
_TEXT	SEGMENT
z$ = 48
b$ = 56
size$1 = 64
n$ = 64
luaZ_read PROC						; COMDAT
; File f:\0\luaspq-1.1\luaspq-1.1\src\lzio.c
; Line 48
$LN21:
  00000	48 89 5c 24 08	 mov	 QWORD PTR [rsp+8], rbx
  00005	48 89 6c 24 10	 mov	 QWORD PTR [rsp+16], rbp
  0000a	48 89 74 24 20	 mov	 QWORD PTR [rsp+32], rsi
  0000f	57		 push	 rdi
  00010	48 83 ec 20	 sub	 rsp, 32			; 00000020H
  00014	49 8b f0	 mov	 rsi, r8
  00017	48 8b ea	 mov	 rbp, rdx
  0001a	48 8b d9	 mov	 rbx, rcx
; Line 49
  0001d	4d 85 c0	 test	 r8, r8
  00020	74 77		 je	 SHORT $LN4@luaZ_read
$LL5@luaZ_read:
; Line 51
  00022	48 83 3b 00	 cmp	 QWORD PTR [rbx], 0
  00026	75 49		 jne	 SHORT $LN1@luaZ_read
; Line 52
  00028	48 8b 53 18	 mov	 rdx, QWORD PTR [rbx+24]
  0002c	48 8b 4b 20	 mov	 rcx, QWORD PTR [rbx+32]
  00030	4c 8d 44 24 40	 lea	 r8, QWORD PTR size$1[rsp]
  00035	ff 53 10	 call	 QWORD PTR [rbx+16]
  00038	48 85 c0	 test	 rax, rax
  0003b	74 73		 je	 SHORT $LN15@luaZ_read
  0003d	48 8b 4c 24 40	 mov	 rcx, QWORD PTR size$1[rsp]
  00042	48 85 c9	 test	 rcx, rcx
  00045	74 69		 je	 SHORT $LN15@luaZ_read
  00047	48 8d 51 ff	 lea	 rdx, QWORD PTR [rcx-1]
  0004b	48 89 43 08	 mov	 QWORD PTR [rbx+8], rax
  0004f	4c 8d 40 01	 lea	 r8, QWORD PTR [rax+1]
  00053	48 89 13	 mov	 QWORD PTR [rbx], rdx
  00056	0f b6 08	 movzx	 ecx, BYTE PTR [rax]
  00059	4c 89 43 08	 mov	 QWORD PTR [rbx+8], r8
  0005d	83 f9 ff	 cmp	 ecx, -1
  00060	74 4e		 je	 SHORT $LN15@luaZ_read
; Line 55
  00062	48 8d 42 01	 lea	 rax, QWORD PTR [rdx+1]
  00066	48 89 03	 mov	 QWORD PTR [rbx], rax
; Line 56
  00069	49 8d 40 ff	 lea	 rax, QWORD PTR [r8-1]
  0006d	48 89 43 08	 mov	 QWORD PTR [rbx+8], rax
$LN1@luaZ_read:
; Line 59
  00071	48 8b 3b	 mov	 rdi, QWORD PTR [rbx]
; Line 60
  00074	48 8b 53 08	 mov	 rdx, QWORD PTR [rbx+8]
  00078	48 8b cd	 mov	 rcx, rbp
  0007b	48 3b f7	 cmp	 rsi, rdi
  0007e	48 0f 46 fe	 cmovbe	 rdi, rsi
  00082	4c 8b c7	 mov	 r8, rdi
  00085	e8 00 00 00 00	 call	 memcpy
; Line 61
  0008a	48 29 3b	 sub	 QWORD PTR [rbx], rdi
; Line 62
  0008d	48 01 7b 08	 add	 QWORD PTR [rbx+8], rdi
; Line 63
  00091	48 03 ef	 add	 rbp, rdi
; Line 64
  00094	48 2b f7	 sub	 rsi, rdi
  00097	75 89		 jne	 SHORT $LL5@luaZ_read
$LN4@luaZ_read:
; Line 66
  00099	33 c0		 xor	 eax, eax
$LN6@luaZ_read:
; Line 67
  0009b	48 8b 5c 24 30	 mov	 rbx, QWORD PTR [rsp+48]
  000a0	48 8b 6c 24 38	 mov	 rbp, QWORD PTR [rsp+56]
  000a5	48 8b 74 24 48	 mov	 rsi, QWORD PTR [rsp+72]
  000aa	48 83 c4 20	 add	 rsp, 32			; 00000020H
  000ae	5f		 pop	 rdi
  000af	c3		 ret	 0
$LN15@luaZ_read:
; Line 53
  000b0	48 8b c6	 mov	 rax, rsi
  000b3	eb e6		 jmp	 SHORT $LN6@luaZ_read
luaZ_read ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT luaZ_init
_TEXT	SEGMENT
L$ = 8
z$ = 16
reader$ = 24
data$ = 32
luaZ_init PROC						; COMDAT
; File f:\0\luaspq-1.1\luaspq-1.1\src\lzio.c
; Line 42
  00000	33 c0		 xor	 eax, eax
  00002	48 89 4a 20	 mov	 QWORD PTR [rdx+32], rcx
  00006	4c 89 42 10	 mov	 QWORD PTR [rdx+16], r8
  0000a	48 89 02	 mov	 QWORD PTR [rdx], rax
; Line 43
  0000d	48 89 42 08	 mov	 QWORD PTR [rdx+8], rax
  00011	4c 89 4a 18	 mov	 QWORD PTR [rdx+24], r9
; Line 44
  00015	c3		 ret	 0
luaZ_init ENDP
_TEXT	ENDS
END
